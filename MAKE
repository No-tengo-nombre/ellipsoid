#!/bin/bash

PROJECT_NAME="Ellipsoid"

PARAMS=""

EXAMPLE=""

while getopts "terdR:" arg
do
    case "$arg" in
        e)
            PARAMS+=" -DELLIPSOID_BUILD_EXAMPLES=ON"
            ;;
        t)
            PARAMS+=" -DELLIPSOID_BUILD_TESTS=ON"
            ;;
        r)
            PARAMS+=" -DMAKE_BUILD_TYPE:STRING=Release"
            ;;
        d)
            PARAMS+=" -DMAKE_BUILD_TYPE:STRING=Debug"
            ;;
        R)
            EXAMPLE="${OPTARG}"
            ;;
    esac
done

_="$(cmake -S . -B ./build/ -G 'MinGW Makefiles' $PARAMS)"
cmake --build ./build/

if [[ "${EXAMPLE}" != "" ]]
then
    ./build/examples/${EXAMPLE}.exe
    # _="$(./build/examples/${EXAMPLE}.exe)"
fi

